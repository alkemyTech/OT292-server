{
  "openapi": "3.0.0",
  "servers": [
    {
      "description": "ServidorLocal",
      "url": "http://localhost:3000"
    }
  ],
  "info": {
    "version": "1.0.0",
    "title": "ONG_ALKEMY",
    "description": "API ONG para la aceleracion en Nodejs de Alkemy"
  },
  "tags": [
    {
      "name": "Testimonials",
      "description": "CRUD Testimonials"
    }
  ],
  "paths": {
    "/testimonials": {
      "get": {
        "tags": [
          "Testimonials"
        ],
        "summary": "Obtener lista de Testimonios (solo Admin)",
        "description": "Lista todos los testimonios (Solo Admin)",
        "responses": {
          "200": {
            "description": "Operacion Exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Testimonio"
                }
              }
            }
          },
          "401": {
            "description": "Token Invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "403": {
            "description": "No Permission",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForBidden"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "post": {
        "tags": [
          "Testimonials"
        ],
        "summary": "Agregar Testimonios (solo Admin)",
        "description": "Agregar testimonios a la base de datos",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "description": "Crear objeto del testimonio",
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/BodyTestimonioPost"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Testimonio agregado con exito",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Testimonio"
                }
              }
            }
          },
          "401": {
            "description": "Token Invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "403": {
            "description": "No Permmision",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForBidden"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/testimonials/{id}": {
      "put": {
        "tags": [
          "Testimonials"
        ],
        "summary": "Editar Testimonio (solo Admin)",
        "description": "Edita testimonios por ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID del testimonio  a modificar",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "description": "Datos a modificar",
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Testimonio"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Operacion Exitosa",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Testimonio"
                }
              }
            }
          },
          "401": {
            "description": "Token Invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "403": {
            "description": "No Permission",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForBidden"
                }
              }
            }
          },
          "404": {
            "description": "Testimonio no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "delete": {
        "tags": [
          "Testimonials"
        ],
        "summary": "Eliminar Testimonio (solo Admin)",
        "description": "Elimina un Testimonio por Id",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id del testimonio a  eliminar.",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Testimonio eliminado con exito",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteTestimonio"
                }
              }
            }
          },
          "401": {
            "description": "Token Invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unauthorized"
                }
              }
            }
          },
          "403": {
            "description": "No Permission",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForBidden"
                }
              }
            }
          },
          "404": {
            "description": "Testimonio no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    }
  },
  "components": {
    "responses": {
      "Unauthorized": {
        "description": "(Unauthorized) Token Invalid"
      },
      "ForBidden": {
        "description": "(Forbidden) no tienes los permisos necesarios"
      },
      "NotFound": {
        "description": "(Not Found) no se encontro la informacion"
      },
      "ServerError": {
        "description": "Error en el servidor"
      }
    },
    "schemas": {
      "Testimonio": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "elon Musk"
          },
          "image": {
            "type": "string",
            "example": "elon.png"
          },
          "content": {
            "type": "string",
            "example": "Este es mi testimonio de la compra de twitter"
          }
        }
      },
      "BodyTestimonioPost": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "nombre del testimonio"
          },
          "image": {
            "type": "string",
            "description": "imagen del testimonio."
          },
          "content": {
            "type": "string",
            "description": "contenido del testimonio"
          }
        },
        "required": [
          "name"
        ]
      },
      "Testimonios": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/Testimonio"
        }
      },
      "DeleteTestimonio": {
        "type": "object",
        "properties": {
          "status": {
            "type": "number",
            "enum": [
              200
            ]
          },
          "message": {
            "type": "string",
            "example": "Testimonial Delete"
          }
        }
      },
      "Unauthorized": {
        "type": "object",
        "properties": {
          "status": {
            "type": "number",
            "enum": [
              401
            ]
          },
          "message": {
            "type": "string",
            "example": "Token Invalid"
          }
        }
      },
      "ForBidden": {
        "type": "object",
        "properties": {
          "status": {
            "type": "number",
            "enum": [
              403
            ]
          },
          "message": {
            "type": "string",
            "example": "Not Permission"
          }
        }
      },
      "NotFound": {
        "type": "object",
        "properties": {
          "status": {
            "type": "number",
            "enum": [
              404
            ]
          },
          "message": {
            "type": "string",
            "example": "Testimonials no found"
          }
        }
      },
      "Token": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          }
        }
      }
    },
    "securitySchemes": {
      "token": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      },
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "security": [
    {
      "bearerAuth": []
    }
  ]
}